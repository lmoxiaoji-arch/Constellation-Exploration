# Swiss Tech Precision - 核心项目总览 (Master Plan)

**更新时间**: 2025-12-23
**版本**: Phase 2 Completed (Full-Stack)

本文档汇总了 "Swiss Tech Precision" 项目的所有核心设计、架构决策及开发进度，以备存档。

---

## 1. 项目愿景 (Project Vision)

打造一个具有 **瑞士精密工业风格 (Swiss Tech Style)** 的高端防伪包装展示平台。
- **美学**: 极致红白、精密网格、工业排版、数据可视化。
- **架构**: 前后端分离、轻量级全栈、RBAC 权限管理。
- **核心功能**: 3D 光刻档案查看 (Archives)、实效复现 (Instance Reproduction)、B端内容管理。

---

## 2. 系统架构 (System Architecture)

### 2.1 技术栈
- **Frontend**: HTML5, Vanilla JS, CSS3 (No Framework, High Performance).
- **Backend**: Node.js (Express Framework).
- **Database**: Local JSON File (`db.json`) - 轻量、易迁移、免安装数据库。
- **Storage**: Local Filesystem (`public/uploads`) - 模拟云存储结构。

### 2.2 目录结构
```text
/root
├── server.js             # [CORE] Node.js 后端服务 (API, Auth, Uploads)
├── db.json               # [CORE] 数据库 (Store Users, Projects, Tokens)
├── start.bat             # [TOOL] 一键启动脚本
├── package.json          # 依赖配置
├── public/               # [WEB] 前端静态资源根目录
│   ├── home.html         # [ENTRY] 首页 (C端/访客入口)
│   ├── admin.html        # [ADMIN] B端管理后台
│   ├── index.html        # [VIEWER] 实效复现查看器 (原项目核心)
│   ├── css/              # 样式文件 (Swiss Style)
│   ├── js/               # 脚本文件
│   └── uploads/          # [DATA] 项目数据存储
│       └── projects/     # 各个项目的文件夹 (如 /LX8821/v1/...)
```

---

## 3. 用户流程与权限 (User Flow & RBAC)

系统分为三个主要角色，权限严格隔离：

### A. 访客 (Visitor)
- **入口**: `home.html` (默认状态)
- **权限**:
    - 浏览 "Swiss Tech Precision" 品牌首页。
    - 查看 **公开光刻档案** (3D 流光卡片墙 - 精选案例)。
    - 使用登录框输入 "预览码"。

### B. 客户 (Client)
- **认证**: 在首页输入 **姓名** + **预览码** (如 `LX8821`)。
- **流程**:
    1.  验证成功后，首页切换为 **"客户专属内容页"**。
    2.  显示该客户名下的所有项目 (3D 卡片形式，封面为整体平面图)。
    3.  点击任意项目，跳转至详情查看器 (`index.html`)。
- **查看器功能**:
    - 3D ViewCube 交互。
    - 六面视图切换 (正/背/左/右/俯/仰)。
    - 静态图与序列帧查看。

### C. 管理员 (Admin / B端)
- **入口**: `admin.html`
- **认证**: 账号密码登录 (初始: `admin` / `a1234569`)。
- **功能**:
    - **项目列表**: 查看所有项目及版本号。
    - **新建项目**: 选择类型 (烟标/酒类/...)，系统自动生成随机码。
    - **上传资源**: 拖拽上传序列帧，后端自动归档至对应文件夹。

---

## 4. 关键功能实现 (Key Features)

### 4.1 视觉系统 (Visual System)
- **日夜模式**: 全局 CSS 变量控制 (`var(--bg-color)`, `var(--accent-red)`)，一键切换深色/浅色主题。
- **精密网格**: 背景采用 1px 动态网格，配合十字准星装饰，营造工业测量感。
- **排版**: 标题使用 `Space Grotesk` (几何感)，数据使用 `JetBrains Mono` (代码感)。

### 4.2 3D 交互 (Interactive 3D)
- **光刻档案**: 使用 CSS3DTransform 实现的流光卡片墙，支持惯性拖拽、悬停放大、透视变化。
- **实效复现**: Canvas 序列帧播放器，支持 3D ViewCube 同步旋转、惯性缩放、多角度切换。

### 4.3 自动化上传 (Auto-Upload)
- 管理员在 B 端拖入文件。
- 后端 (`server.js`) 自动接收文件 -> 存入 `uploads/projects/{ID}/{ver}/` -> 更新 `db.json`。
- 自动生成配置，前端无需手动修改代码即可读取新上传的内容。

---

## 5. 开发进度 (Tasks Status)

### ✅ Phase 1: 核心查看器 (Core Viewer)
- [x] 3D ViewCube 联动与交互优化
- [x] 序列帧播放逻辑与缓存优化
- [x] 视差背景与 UI 细节打磨

### ✅ Phase 2: 全栈重构 (Full-Stack Refactor)
- [x] **后端环境**: Node.js + Express + DB.json 搭建完成。
- [x] **新首页**: `home.html` (Swiss Style) 开发完成。
- [x] **B端后台**: `admin.html` (Admin Dashboard) 开发完成。
- [x] **查看器适配**: `index.html` 改造成动态加载模式 (支持 `?project=ID`)。

---

## 6. 如何维护 (How to Maintain)

### 备份
- 定期备份 `db.json` 文件（包含所有账号和项目索引）。
- 定期备份 `public/uploads` 文件夹（包含所有图片资源）。

### 启动服务
- 每次开机后，双击根目录下的 **`start.bat`** 即可恢复网站运行。

### 修改配置
- **修改管理员密码**: 打开 `db.json`，找到 `users` 数组，修改 `password` 字段。
- **手动添加客户**: 可以在 B 端开发 "客户管理" 功能，或直接修改 `db.json` 中的 `clients` 列表。

---
**Document Generated by Antigravity Agent**
